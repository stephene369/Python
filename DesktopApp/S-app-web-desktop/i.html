<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste avec icône de fermeture</title>
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <style>
        .input-group {
            position: relative;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .icon {
            margin-right: 10px;
        }
        .text {
            flex-grow: 1;
        }
        .close-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
            color: red;
        }
    </style>
</head>
<body>
    <ul id="infoGroup1"></ul>
    <ul id="infoGroup1_"></ul>
    <button id="phone" class="add-button"><i class='bx bx-message-square-add'></i>Téléphone</button>

    <script>
        function createLi(input, iconName) {
            iconName = iconName.toLowerCase(); // Convertir en minuscules

            const li = document.createElement('li');
            li.className = 'input-group'; // Classe pour le styling

            const span1 = document.createElement('span');
            const span2 = document.createElement('span');
            const i = document.createElement('i');
            const closeIcon = document.createElement('i');

            span1.className = "icon";
            span2.className = "text";

            // Dictionnaire des icônes
            const icons = {
                linkedin: 'bx bxl-linkedin',
                github: 'bx bxl-github',
                medium: 'bx bxl-medium',
                twitter: 'bx bxl-twitter',
                facebook: 'bx bxl-facebook',
                instagram: 'bx bxl-instagram',
                youtube: 'bx bxl-youtube',
                dribbble: 'bx bxl-dribbble',
                behance: 'bx bxl-behance',
                email: 'bx bx-envelope'
            };

            // Ajouter la classe correspondante si l'icône est dans le dictionnaire
            if (icons[iconName]) {
                i.classList.add(icons[iconName]);
            }

            // Mettre à jour span2 avec la valeur de l'input en temps réel
            input.addEventListener('input', function() {
                span2.innerText = input.value;
            });

            // Ajouter l'icône de fermeture
            closeIcon.className = 'bx bx-down-arrow-alt close-icon';

            // Ajouter un écouteur d'événement pour faire disparaître l'élément
            closeIcon.addEventListener('click', function() {
                li.remove();
            });

            span1.appendChild(i);
            li.appendChild(span1);
            li.appendChild(span2);
            li.appendChild(closeIcon);

            return li;
        }

        function createInputDiv(addButton) {
            const div = document.createElement('div');
            const div1 = document.createElement('div');
            const div2 = document.createElement('div');

            div.className = 'input-group';
            div1.className = 'lab-div';
            div2.className = 'input-div';

            // Créer un input
            const input = document.createElement('input');
            const lab = document.createElement('label'); 

            lab.innerHTML = addButton.textContent;
            input.type = 'text';

            // Créer un bouton
            const button = document.createElement('button');
            button.textContent = 'Remove';
            button.addEventListener('click', function() {
                div.remove();
                addButton.style.display = 'inline-block'; // Réafficher le bouton d'ajout
            });

            div1.appendChild(lab);
            div2.appendChild(input);
            div2.appendChild(button);

            div.appendChild(div1);
            div.appendChild(div2);

            return [div , input];
        }

        function addElement(parent1Id, parent2Id, buttonId) {
            const parent1 = document.getElementById(parent1Id);
            const parent2 = document.getElementById(parent2Id);
            const button = document.getElementById(buttonId);

            const icon = button.querySelector('i');

            button.addEventListener('click', function() {
                const [newInputDiv, input] = createInputDiv(button);
                const newListItem = createLi(input, icon.className.split(' ')[1].replace('bxl-', ''));
                parent1.appendChild(newInputDiv);
                parent2.appendChild(newListItem);

                // Cacher le bouton d'ajout
                button.style.display = 'none';
            });
        }

        // Exemple d'appel de la fonction
        addElement('infoGroup1', 'infoGroup1_', 'phone');
    </script>
</body>
</html>
